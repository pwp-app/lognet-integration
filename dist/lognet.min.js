!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lognet",[],e):"object"==typeof exports?exports.lognet=e():t.lognet=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var o,r,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[n(1)],void 0===(i="function"==typeof(o=function(e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s;e=(s=e)&&s.__esModule?s:{default:s};var p=new function t(){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"getClientInfo",(function(){return{clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,userAgent:window.navigator.userAgent}})),i(this,"addListener",(function(){window.addEventListener("error",(function(t){var e="错误信息: ".concat(t.message,"\r\n文件: ").concat(t.filename,"\r\n行号: ").concat(t.lineno,"\r\n列号: ").concat(t.colno);o.submitGeneral(e)}))})),i(this,"submitGeneral",(function(t){o.options.appKey?!t||t.length<1?o.printError("Cannot submit empty content."):fetch("https://lognet.pwp.app/api/submit/general",{method:"POST",body:JSON.stringify(r({appKey:o.options.appKey,path:window.location.pathname,content:t},o.getClientInfo())),headers:new Headers({"Content-Type":"application/json"})}).catch((function(t){o.debug&&o.printError(t)})):o.printError("App key is not set.")})),i(this,"printError",(function(t){o.injection?o.privateError.apply(console,t):console.error(t)})),i(this,"init",(function(){if(!o.inited){var t=document.getElementById("lognet");if(t){var e=t.getAttribute("key"),n=t.getAttribute("mission");o.options.appKey=e||o.options.appKey,o.options.missionId=n||o.options.missionId}o.injection&&interceptConsole(),o.inited=!0}})),i(this,"setKey",(function(t){"string"==typeof t?o.options.appKey=t:o.printError("App key must be a string.")})),i(this,"setMission",(function(t){"string"==typeof t?o.options.missionId=t:o.printError("Mission ID must be a string.")})),i(this,"setInjection",(function(t){"boolean"==typeof t?(o.injection=t,o.injection?o.interceptConsole():console.error=o.privateError):o.printError("Please set a boolean to injection option.")})),i(this,"setDebug",(function(t){"boolean"==typeof t?o.debug=t:o.printError("Please set a boolen to debug flag.")})),i(this,"setOptions",(function(t){"object"===n(t)?t.appKey?t.injection?o.options=t:t.injection=!1:o.printError("Cannot set options, some necessary options are lost."):o.printError("Options should be a object.")})),i(this,"interceptConsole",(function(){o.privateError=console.error,console.error=function(t){o.submitGeneral(t),o.privateError.apply(console,t)}})),this.inited=!1,this.options={appKey:null,missionId:null,injection:!1,debug:!1},this.logger=new e.default(this.options.appKey,this.options.missionId),this.debug=this.logger.debug,this.info=this.logger.info,this.warn=this.logger.warn,this.error=this.logger.error,this.logger.parent=this,this.addListener()};window.addEventListener("load",(function(){p.init()})),t.exports=p,t.exports.default=p})?o.apply(e,r):o)||(t.exports=i)},function(t,e,n){var o,r,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],void 0===(i="function"==typeof(o=function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"debug",(function(t,n){e.log("debug",t,n)})),o(this,"info",(function(t,n){e.log("info",t,n)})),o(this,"warn",(function(t,n){e.log("warn",t,n)})),o(this,"error",(function(t,n){e.log("error",t,n)})),o(this,"log",(function(t,n,o){e.submit(o||e.parent.options.missionId,t,n)})),o(this,"submit",(function(t,o,r){e.parent&&e.parent.options.appKey?t?fetch("https://lognet.pwp.app/api/submit/mission",{method:"POST",body:JSON.stringify(n({appKey:e.parent.options.appKey,type:o,missionId:t,path:window.location.pathname,content:r},e.parent.getClientInfo())),headers:new Headers({"Content-Type":"application/json"})}).catch((function(t){e.parent&&e.parent.debug&&e.printError(t)})):e.printError("Mission ID is not set."):e.printError("App key is not set.")})),o(this,"printError",(function(t){e.parent&&e.parent.privateError?e.parent.privateError.apply(console,t):console.log(t)})),o(this,"setPrivateError",(function(t){e.privateError=t})),o(this,"setKey",(function(t){e.appKey=t})),o(this,"setMission",(function(t){e.missionId=t})),o(this,"setDebug",(function(t){e.flag=t}))};t.default=r})?o.apply(e,r):o)||(t.exports=i)}])}));