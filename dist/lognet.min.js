!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lognet",[],t):"object"==typeof exports?exports.lognet=t():e.lognet=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var o,r,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[n(1)],void 0===(i="function"==typeof(o=function(t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i;t=(i=t)&&i.__esModule?i:{default:i};var s=new function e(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"getClientInfo",(function(){return{clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,userAgent:window.navigator.userAgent}})),r(this,"addListener",(function(){window.addEventListener("error",(function(e){var t="错误信息: ".concat(e.message,"\r\n文件: ").concat(e.filename,"\r\n行号: ").concat(e.lineno,"\r\n列号: ").concat(e.colno);n.submitGeneral(t)}))})),r(this,"submitGeneral",(function(e){n.options.appKey?!e||e.length<1?n.printError("Cannot submit empty content."):fetch("https://lognet.pwp.app/api/submit/general",{method:"POST",body:JSON.stringify(o({appKey:n.options.appKey,path:window.location.pathname,content:e},n.getClientInfo())),headers:new Headers({"Content-Type":"application/json"})}).catch((function(e){n.debug&&n.printError(e)})):n.printError("App key is not set.")})),r(this,"printError",(function(e){n.injection?n.privateError.apply(console,e):console.error(e)})),r(this,"init",(function(){if(!n.inited){var e=document.getElementById("lognet");e&&(n.appKey=e.getAttribute("key")),n.injection&&interceptConsole(),n.inited=!0}})),r(this,"setKey",(function(e){n.options.appKey=e})),r(this,"setMission",(function(e){n.options.missionId=e})),r(this,"setInjection",(function(e){"boolean"==typeof e?(n.injection=e,n.injection?n.interceptConsole():console.error=n.privateError):n.printError("Please set a boolean to injection option.")})),r(this,"setDebug",(function(e){"boolean"==typeof e?n.debug=e:n.printError("Please set a boolen to debug flag.")})),r(this,"interceptConsole",(function(){n.privateError=console.error,console.error=function(e){n.submitGeneral(e),n.privateError.apply(console,e)}})),this.inited=!1,this.options={appKey:null,missionId:null,injection:!1,debug:!1},this.logger=new t.default(this.options.appKey,this.options.missionId),this.debug=this.logger.debug,this.info=this.logger.info,this.warn=this.logger.warn,this.error=this.logger.error,this.logger.parent=this,this.addListener()};window.addEventListener("load",(function(){s.init()})),e.exports=s,e.exports.default=s})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){var o,r,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[t],void 0===(i="function"==typeof(o=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"debug",(function(e,n){t.log("debug",e,n)})),o(this,"info",(function(e,n){t.log("info",e,n)})),o(this,"warn",(function(e,n){t.log("warn",e,n)})),o(this,"error",(function(e,n){t.log("error",e,n)})),o(this,"log",(function(e,n,o){t.submit(o||t.parent.options.missionId,e,n)})),o(this,"submit",(function(e,o,r){t.parent&&t.parent.options.appKey?e?fetch("https://lognet.pwp.app/api/submit/mission",{method:"POST",body:JSON.stringify(n({appKey:t.parent.options.appKey,type:o,missionId:e,path:window.location.pathname,content:r},t.parent.getClientInfo())),headers:new Headers({"Content-Type":"application/json"})}).catch((function(e){t.parent&&t.parent.debug&&t.printError(e)})):t.printError("Mission ID is not set."):t.printError("App key is not set.")})),o(this,"printError",(function(e){t.parent&&t.parent.privateError?t.parent.privateError.apply(console,e):console.log(e)})),o(this,"setPrivateError",(function(e){t.privateError=e})),o(this,"setKey",(function(e){t.appKey=e})),o(this,"setMission",(function(e){t.missionId=e})),o(this,"setDebug",(function(e){t.flag=e}))};e.default=r})?o.apply(t,r):o)||(e.exports=i)}])}));